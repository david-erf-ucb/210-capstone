# Test Predictions Data Dictionary

Generated by `export_predictions.py`. One row per ICU stay that appears in at least one task's test set.

## ID Columns

| Column | Type | Description |
|--------|------|-------------|
| stay_id | int | ICU stay identifier (primary key) |
| subject_id | int | Patient identifier (MIMIC) |
| hadm_id | int | Hospital admission identifier (MIMIC) |
| age | float | Patient age at admission |
| gender | str | Patient gender |
| race | str | Patient race/ethnicity |

## Task Columns (per task)

For each task, three columns:

| Column pattern | Type | Description |
|----------------|------|-------------|
| {task}_gt | int | Ground truth (0 or 1). NaN if stay not in this task's test set. |
| {task}_LR_prob | float | Logistic Regression predicted probability of positive class. NaN if not in test set. |
| {task}_RF_prob | float | Random Forest predicted probability of positive class. NaN if not in test set. |

## Tasks

- **hosp_mort_24h_gap4h**: In-hospital mortality, using first 24h of data, 4h gap
- **ARF_2h_gap4h**: Acute respiratory failure (4h gap), 2h observation window
- **ARF_6h_gap4h**: Acute respiratory failure (4h gap), 6h observation window
- **shock_2h_gap4h**: Shock (vasopressor use, 4h gap), 2h observation window
- **shock_6h_gap4h**: Shock (vasopressor use, 4h gap), 6h observation window

## Derived Predictions

For precision/recall: threshold probabilities at 0.5 to get binary predictions:
  `pred = (prob >= 0.5).astype(int)`

## Data Leakage

Test set is the held-out 20% from the 70/10/20 split (seed 41). No training or validation data included.

## Related Files

- **test_metrics.csv**: Aggregate metrics (AUC, AP, precision, recall, log_loss) per task per model. Precision/recall use threshold 0.5. Log loss is binary cross-entropy.
- **test_population_summary.csv**: Test set class balance per task. Columns: task, n_total, n_positive, n_negative, pct_positive.
